{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet MarketComponent = class MarketComponent {\n  constructor(http) {\n    this.http = http;\n    this.basePath = this.http.imgBasePath;\n    this.movieShow = [];\n    this.movie = [];\n    this.addProduct = [];\n    this.price = 0;\n    this.amount = 1;\n  }\n  ngOnInit() {\n    this.setValue();\n  }\n  setValue() {\n    this.movie = this.getValue();\n    this.movieShow = this.getValue();\n  }\n  showProduct(value) {\n    this.addProduct = value;\n  }\n  getValue() {\n    return JSON.parse(window.localStorage.getItem('market'));\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart'));\n  }\n  productAddCart() {\n    let old = this.getCart();\n    let cart = {\n      detail: this.addProduct,\n      amount: this.amount\n    };\n    if (old !== null) {\n      let check = 0;\n      old.map((value, index) => {\n        if (value.detail.id === this.addProduct.id) {\n          check = 1;\n          value.amount += this.amount;\n        }\n        return true;\n      });\n      if (check === 1) {\n        window.localStorage.setItem('cart', JSON.stringify([...old]));\n        Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n      } else {\n        window.localStorage.setItem('cart', JSON.stringify([...old, cart]));\n        Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n      }\n    } else {\n      window.localStorage.setItem('cart', JSON.stringify([cart]));\n      Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n    }\n    this.http.totalCart = this.getCart().length;\n    this.amount = 1;\n  }\n  changeAmount(type) {\n    if (type === 'add') {\n      this.amount = this.amount + 1;\n    } else {\n      this.amount > 0 ? this.amount = this.amount - 1 : this.amount;\n    }\n  }\n  filterList(keyWord) {\n    let data = this.movie;\n    let str = keyWord.toLowerCase();\n    data = data.filter(function (value) {\n      // console.log(value.name)\n      return value.title.toLowerCase().indexOf(str) !== -1; // returns true or false\n    });\n\n    this.movieShow = data;\n  }\n};\nMarketComponent = __decorate([Component({\n  selector: 'app-market',\n  templateUrl: './market.component.html',\n  styleUrls: ['./market.component.scss']\n})], MarketComponent);\nexport { MarketComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAEjD,OAAOC,IAAI,MAAM,aAAa;AAMvB,IAAMC,eAAe,GAArB,MAAMA,eAAe;EAQ1BC,YAAoBC,IAAiB;IAAjB,SAAI,GAAJA,IAAI;IAPjB,aAAQ,GAAG,IAAI,CAACA,IAAI,CAACC,WAAW;IAChC,cAAS,GAAG,EAAE;IACd,UAAK,GAAG,EAAE;IACV,eAAU,GAAQ,EAAE;IACpB,UAAK,GAAG,CAAC;IACT,WAAM,GAAG,CAAC;EAEuB;EAExCC,QAAQ;IACN,IAAI,CAACC,QAAQ,EAAE;EACjB;EACAA,QAAQ;IACN,IAAI,CAACC,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAE;IAC5B,IAAI,CAACC,SAAS,GAAG,IAAI,CAACD,QAAQ,EAAE;EAClC;EACAE,WAAW,CAACC,KAAK;IACf,IAAI,CAACC,UAAU,GAAGD,KAAK;EACzB;EACAH,QAAQ;IACN,OAAOK,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;EAC1D;EACAC,OAAO;IACL,OAAOL,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACxD;EACAE,cAAc;IACZ,IAAIC,GAAG,GAAG,IAAI,CAACF,OAAO,EAAE;IACxB,IAAIG,IAAI,GAAG;MACTC,MAAM,EAAE,IAAI,CAACV,UAAU;MACvBW,MAAM,EAAE,IAAI,CAACA;KACd;IACD,IAAIH,GAAG,KAAK,IAAI,EAAE;MAChB,IAAII,KAAK,GAAG,CAAC;MACbJ,GAAG,CAACK,GAAG,CAAC,CAACd,KAAK,EAAEe,KAAK,KAAI;QACvB,IAAIf,KAAK,CAACW,MAAM,CAACK,EAAE,KAAK,IAAI,CAACf,UAAU,CAACe,EAAE,EAAE;UAC1CH,KAAK,GAAG,CAAC;UACTb,KAAK,CAACY,MAAM,IAAI,IAAI,CAACA,MAAM;;QAE7B,OAAO,IAAI;MACb,CAAC,CAAC;MACF,IAAIC,KAAK,KAAK,CAAC,EAAE;QACfT,MAAM,CAACC,YAAY,CAACY,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAAC,CAAC,GAAGT,GAAG,CAAC,CAAC,CAAC;QAC7DpB,IAAI,CAAC8B,IAAI,CAAC,EAAE,EAAE,mBAAmB,EAAE,SAAS,CAAC;OAC9C,MAAM;QACLf,MAAM,CAACC,YAAY,CAACY,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAAC,CAAC,GAAGT,GAAG,EAAEC,IAAI,CAAC,CAAC,CAAC;QACnErB,IAAI,CAAC8B,IAAI,CAAC,EAAE,EAAE,mBAAmB,EAAE,SAAS,CAAC;;KAEhD,MAAM;MACLf,MAAM,CAACC,YAAY,CAACY,OAAO,CAAC,MAAM,EAAEf,IAAI,CAACgB,SAAS,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC;MAC3DrB,IAAI,CAAC8B,IAAI,CAAC,EAAE,EAAE,mBAAmB,EAAE,SAAS,CAAC;;IAE/C,IAAI,CAAC3B,IAAI,CAAC4B,SAAS,GAAG,IAAI,CAACb,OAAO,EAAE,CAACc,MAAM;IAC3C,IAAI,CAACT,MAAM,GAAG,CAAC;EACjB;EACAU,YAAY,CAACC,IAAI;IACf,IAAIA,IAAI,KAAK,KAAK,EAAE;MAClB,IAAI,CAACX,MAAM,GAAG,IAAI,CAACA,MAAM,GAAG,CAAC;KAC9B,MAAM;MACL,IAAI,CAACA,MAAM,GAAG,CAAC,GAAI,IAAI,CAACA,MAAM,GAAG,IAAI,CAACA,MAAM,GAAG,CAAC,GAAI,IAAI,CAACA,MAAM;;EAEnE;EACAY,UAAU,CAACC,OAAc;IACvB,IAAIC,IAAI,GAAG,IAAI,CAAC9B,KAAK;IACrB,IAAI+B,GAAG,GAAGF,OAAO,CAACG,WAAW,EAAE;IAC/BF,IAAI,GAAGA,IAAI,CAACG,MAAM,CAAC,UAAU7B,KAAK;MAChC;MACA,OAAOA,KAAK,CAAC8B,KAAK,CAACF,WAAW,EAAE,CAACG,OAAO,CAACJ,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC;;IACF,IAAI,CAAC7B,SAAS,GAAG4B,IAAI;EACvB;CACD;AAvEYpC,eAAe,eAL3BF,SAAS,CAAC;EACT4C,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,GACW5C,eAAe,CAuE3B;SAvEYA,eAAe","names":["Component","Swal","MarketComponent","constructor","http","imgBasePath","ngOnInit","setValue","movie","getValue","movieShow","showProduct","value","addProduct","JSON","parse","window","localStorage","getItem","getCart","productAddCart","old","cart","detail","amount","check","map","index","id","setItem","stringify","fire","totalCart","length","changeAmount","type","filterList","keyWord","data","str","toLowerCase","filter","title","indexOf","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/phanuwitkittirong/Documents/project/movie-market-place/src/app/pages/market/market.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpService } from 'src/services/http.service';\nimport Swal from 'sweetalert2';\n@Component({\n  selector: 'app-market',\n  templateUrl: './market.component.html',\n  styleUrls: ['./market.component.scss'],\n})\nexport class MarketComponent implements OnInit {\n  public basePath = this.http.imgBasePath;\n  public movieShow = [];\n  public movie = [];\n  public addProduct: any = [];\n  public price = 0;\n  public amount = 1;\n\n  constructor(private http: HttpService) {}\n\n  ngOnInit(): void {\n    this.setValue();\n  }\n  setValue() {\n    this.movie = this.getValue();\n    this.movieShow = this.getValue();\n  }\n  showProduct(value) {\n    this.addProduct = value;\n  }\n  getValue() {\n    return JSON.parse(window.localStorage.getItem('market'));\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart'));\n  }\n  productAddCart() {\n    let old = this.getCart();\n    let cart = {\n      detail: this.addProduct,\n      amount: this.amount,\n    };\n    if (old !== null) {\n      let check = 0;\n      old.map((value, index) => {\n        if (value.detail.id === this.addProduct.id) {\n          check = 1;\n          value.amount += this.amount;\n        }\n        return true;\n      });\n      if (check === 1) {\n        window.localStorage.setItem('cart', JSON.stringify([...old]));\n        Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n      } else {\n        window.localStorage.setItem('cart', JSON.stringify([...old, cart]));\n        Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n      }\n    } else {\n      window.localStorage.setItem('cart', JSON.stringify([cart]));\n      Swal.fire('', 'เพิ่มสินค้าสำเร็จ', 'success');\n    }\n    this.http.totalCart = this.getCart().length\n    this.amount = 1;\n  }\n  changeAmount(type) {\n    if (type === 'add') {\n      this.amount = this.amount + 1;\n    } else {\n      this.amount > 0 ? (this.amount = this.amount - 1) : this.amount;\n    }\n  }\n  filterList(keyWord:string) {\n    let data = this.movie;\n    let str = keyWord.toLowerCase()\n    data = data.filter(function (value) {\n      // console.log(value.name)\n      return value.title.toLowerCase().indexOf(str) !== -1; // returns true or false\n    });\n    this.movieShow = data;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}