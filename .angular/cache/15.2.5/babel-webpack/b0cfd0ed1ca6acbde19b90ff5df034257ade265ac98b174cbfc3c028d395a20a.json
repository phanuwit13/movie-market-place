{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet CartComponent = class CartComponent {\n  constructor(http) {\n    this.http = http;\n    this.basePath = this.http.imgBasePath;\n    this.cartProduct = [];\n    this.total = 0;\n    this.pricePromo = 0;\n    this.priceTotal = 0;\n    this.test = 59;\n  }\n  ngOnInit() {\n    this.cartProduct = this.getCart();\n    console.log(this.cartProduct);\n    if (this.cartProduct) {\n      this.total = this.sumtotle();\n      this.priceTotal = this.sumPrice();\n      this.pricePromo = this.sumPromotion();\n      this.test = JSON.parse(window.localStorage.getItem('time'));\n    }\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart'));\n  }\n  sumtotle() {\n    let sum = 0;\n    this.cartProduct.map(value => {\n      return sum += value.amount;\n    });\n    return sum;\n  }\n  sumPrice() {\n    let sum = 0;\n    this.cartProduct.map(value => {\n      return sum += value.amount * value.detail.price;\n    });\n    return sum;\n  }\n  sumPromotion() {\n    let sum = 0;\n    let checkPromotion = this.sumtotle();\n    console.log(checkPromotion);\n    this.cartProduct.map(value => {\n      return sum += value.amount * value.detail.price;\n    });\n    if (checkPromotion > 3 && checkPromotion <= 5) {\n      return sum - sum * 10 / 100;\n    } else if (checkPromotion > 5) {\n      return sum - sum * 20 / 100;\n    } else return sum;\n  }\n  clearCart() {\n    Swal.fire({\n      icon: 'question',\n      title: '',\n      text: 'ยืนยันการล้างตะกร้า?',\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: `ยืนยัน`,\n      cancelButtonText: `ยกเลิก`\n    }).then(result => {\n      if (result.isConfirmed) {\n        Swal.fire('', 'สำเร็จ!', 'success');\n        window.localStorage.setItem('cart', JSON.stringify([]));\n        this.cartProduct = this.getCart();\n        this.total = 0;\n        this.pricePromo = 0;\n        this.priceTotal = 0;\n      } else if (result.isDenied) {\n        // Swal.fire('Changes are not saved', '', 'info')\n      }\n    });\n  }\n  deleteCart(id) {\n    let newData = this.cartProduct.filter(value => {\n      return value.detail.id !== id;\n    });\n    // console.log(newData)\n    window.localStorage.setItem('cart', JSON.stringify([...newData]));\n    this.cartProduct = this.getCart();\n    this.http.totalCart = this.getCart().length;\n    this.total = this.sumtotle();\n    this.priceTotal = this.sumPrice();\n    this.pricePromo = this.sumPromotion();\n  }\n  pay() {\n    this.test = JSON.parse(window.localStorage.getItem('time'));\n    let count = JSON.parse(window.localStorage.getItem('time'));\n    if (count) {\n      this.getTime();\n    } else {\n      window.localStorage.setItem('time', JSON.stringify(59));\n      this.count();\n    }\n  }\n  count() {\n    this.Countdown = setInterval(() => {\n      if (this.test === 0) {\n        window.localStorage.removeItem('time');\n        clearInterval(this.Countdown);\n        this.test = 59;\n      } else {\n        this.test = JSON.parse(window.localStorage.getItem('time')) - 1;\n        window.localStorage.setItem('time', JSON.stringify(this.test));\n      }\n    }, 1000);\n  }\n  getTime() {\n    var Countdown = setInterval(() => {\n      this.test = JSON.parse(window.localStorage.getItem('time'));\n    }, 1000);\n  }\n  clearTime() {\n    clearInterval(this.Countdown);\n    window.localStorage.removeItem('time');\n  }\n};\nCartComponent = __decorate([Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss']\n})], CartComponent);\nexport { CartComponent };","map":{"version":3,"mappings":"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","names":["Component","Swal","CartComponent","constructor","http","imgBasePath","ngOnInit","cartProduct","getCart","console","log","total","sumtotle","priceTotal","sumPrice","pricePromo","sumPromotion","test","JSON","parse","window","localStorage","getItem","sum","map","value","amount","detail","price","checkPromotion","clearCart","fire","icon","title","text","showDenyButton","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","setItem","stringify","isDenied","deleteCart","id","newData","filter","totalCart","length","pay","count","getTime","Countdown","setInterval","removeItem","clearInterval","clearTime","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/phanuwitkittirong/Documents/project/movie-market-place/src/app/pages/cart/cart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpService } from 'src/services/http.service';\nimport Swal from 'sweetalert2';\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss'],\n})\nexport class CartComponent implements OnInit {\n  public basePath = this.http.imgBasePath;\n\n  public cartProduct: any = [];\n  public total = 0;\n  public pricePromo = 0;\n  public priceTotal = 0;\n  public test = 59;\n  public Countdown: any;\n  constructor(private http: HttpService) {}\n\n  ngOnInit(): void {\n    this.cartProduct = this.getCart();\n    console.log(this.cartProduct);\n    if (this.cartProduct) {\n      this.total = this.sumtotle();\n      this.priceTotal = this.sumPrice();\n      this.pricePromo = this.sumPromotion();\n      this.test = JSON.parse(window.localStorage.getItem('time'));\n    }\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart'));\n  }\n  sumtotle() {\n    let sum = 0;\n    this.cartProduct.map((value) => {\n      return (sum += value.amount);\n    });\n    return sum;\n  }\n  sumPrice() {\n    let sum = 0;\n    this.cartProduct.map((value) => {\n      return (sum += value.amount * value.detail.price);\n    });\n    return sum;\n  }\n  sumPromotion() {\n    let sum = 0;\n    let checkPromotion = this.sumtotle();\n    console.log(checkPromotion);\n    this.cartProduct.map((value) => {\n      return (sum += value.amount * value.detail.price);\n    });\n    if (checkPromotion > 3 && checkPromotion <= 5) {\n      return sum - (sum * 10) / 100;\n    } else if (checkPromotion > 5) {\n      return sum - (sum * 20) / 100;\n    } else return sum;\n  }\n  clearCart() {\n    Swal.fire({\n      icon: 'question',\n      title: '',\n      text: 'ยืนยันการล้างตะกร้า?',\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: `ยืนยัน`,\n      cancelButtonText: `ยกเลิก`,\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire('', 'สำเร็จ!', 'success');\n        window.localStorage.setItem('cart', JSON.stringify([]));\n        this.cartProduct = this.getCart();\n        this.total = 0;\n        this.pricePromo = 0;\n        this.priceTotal = 0;\n      } else if (result.isDenied) {\n        // Swal.fire('Changes are not saved', '', 'info')\n      }\n    });\n  }\n  deleteCart(id) {\n    let newData = this.cartProduct.filter((value) => {\n      return value.detail.id !== id;\n    });\n    // console.log(newData)\n    window.localStorage.setItem('cart', JSON.stringify([...newData]));\n    this.cartProduct = this.getCart();\n    this.http.totalCart = this.getCart().length;\n    this.total = this.sumtotle();\n    this.priceTotal = this.sumPrice();\n    this.pricePromo = this.sumPromotion();\n  }\n  pay() {\n    this.test = JSON.parse(window.localStorage.getItem('time'));\n    let count = JSON.parse(window.localStorage.getItem('time'));\n    if (count) {\n      this.getTime();\n    } else {\n      window.localStorage.setItem('time', JSON.stringify(59));\n      this.count();\n    }\n  }\n  count() {\n    this.Countdown = setInterval(() => {\n      if (this.test === 0) {\n        window.localStorage.removeItem('time');\n        clearInterval(this.Countdown);\n        this.test = 59;\n      } else {\n        this.test = JSON.parse(window.localStorage.getItem('time')) - 1;\n        window.localStorage.setItem('time', JSON.stringify(this.test));\n      }\n    }, 1000);\n  }\n  getTime() {\n    var Countdown = setInterval(() => {\n      this.test = JSON.parse(window.localStorage.getItem('time'));\n    }, 1000);\n  }\n  clearTime() {\n    clearInterval(this.Countdown);\n    window.localStorage.removeItem('time');\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}