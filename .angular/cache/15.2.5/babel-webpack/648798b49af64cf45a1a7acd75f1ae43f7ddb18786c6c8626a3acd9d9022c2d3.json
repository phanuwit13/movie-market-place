{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/http.service\";\nexport class CartComponent {\n  constructor(http) {\n    this.http = http;\n    this.basePath = this.http.imgBasePath;\n    this.cartProduct = [];\n    this.total = 0;\n    this.pricePromo = 0;\n    this.priceTotal = 0;\n    this.test = 59;\n  }\n  ngOnInit() {\n    this.cartProduct = this.getCart();\n    console.log(this.cartProduct);\n    if (this.cartProduct) {\n      this.total = this.sumtotle();\n      this.priceTotal = this.sumPrice();\n      this.pricePromo = this.sumPromotion();\n      this.test = JSON.parse(window.localStorage.getItem('time') || '');\n    }\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart') || '');\n  }\n  sumtotle() {\n    let sum = 0;\n    this.cartProduct.map(value => {\n      return sum += value.amount;\n    });\n    return sum;\n  }\n  sumPrice() {\n    let sum = 0;\n    this.cartProduct.map(value => {\n      return sum += value.amount * value.detail.price;\n    });\n    return sum;\n  }\n  sumPromotion() {\n    let sum = 0;\n    let checkPromotion = this.sumtotle();\n    console.log(checkPromotion);\n    this.cartProduct.map(value => {\n      return sum += value.amount * value.detail.price;\n    });\n    if (checkPromotion > 3 && checkPromotion <= 5) {\n      return sum - sum * 10 / 100;\n    } else if (checkPromotion > 5) {\n      return sum - sum * 20 / 100;\n    } else return sum;\n  }\n  clearCart() {\n    Swal.fire({\n      icon: 'question',\n      title: '',\n      text: 'ยืนยันการล้างตะกร้า?',\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: `ยืนยัน`,\n      cancelButtonText: `ยกเลิก`\n    }).then(result => {\n      if (result.isConfirmed) {\n        Swal.fire('', 'สำเร็จ!', 'success');\n        window.localStorage.setItem('cart', JSON.stringify([]));\n        this.cartProduct = this.getCart();\n        this.total = 0;\n        this.pricePromo = 0;\n        this.priceTotal = 0;\n      } else if (result.isDenied) {\n        // Swal.fire('Changes are not saved', '', 'info')\n      }\n    });\n  }\n  deleteCart(id) {\n    let newData = this.cartProduct.filter(value => {\n      return value.detail.id !== id;\n    });\n    // console.log(newData)\n    window.localStorage.setItem('cart', JSON.stringify([...newData]));\n    this.cartProduct = this.getCart();\n    this.http.totalCart = this.getCart().length;\n    this.total = this.sumtotle();\n    this.priceTotal = this.sumPrice();\n    this.pricePromo = this.sumPromotion();\n  }\n  pay() {\n    this.test = JSON.parse(window.localStorage.getItem('time') || '');\n    let count = JSON.parse(window.localStorage.getItem('time') || '');\n    if (count) {\n      this.getTime();\n    } else {\n      window.localStorage.setItem('time', JSON.stringify(59));\n      this.count();\n    }\n  }\n  count() {\n    this.Countdown = setInterval(() => {\n      if (this.test === 0) {\n        window.localStorage.removeItem('time');\n        clearInterval(this.Countdown);\n        this.test = 59;\n      } else {\n        this.test = JSON.parse(window.localStorage.getItem('time') || '') - 1;\n        window.localStorage.setItem('time', JSON.stringify(this.test));\n      }\n    }, 1000);\n  }\n  getTime() {\n    var Countdown = setInterval(() => {\n      this.test = JSON.parse(window.localStorage.getItem('time') || '');\n    }, 1000);\n  }\n  clearTime() {\n    clearInterval(this.Countdown);\n    window.localStorage.removeItem('time');\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.HttpService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 2,\n  vars: 0,\n  consts: [[1, \"container\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"sss\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".content-detail[_ngcontent-%COMP%] {\\n  background-color: #ffffff;\\n  margin-top: 4%;\\n  margin-bottom: 5%;\\n  border-radius: 20px;\\n}\\n\\n.img-thumbnail[_ngcontent-%COMP%] {\\n  padding: 0px !important;\\n  background-color: #ffffff !important;\\n  border: 0px !important;\\n  border-radius: 10px !important;\\n  max-width: 90% !important;\\n  height: auto;\\n}\\n\\n.img-brand[_ngcontent-%COMP%] {\\n  object-fit: cover;\\n  width: 45px;\\n  height: 45px;\\n  object-position: 50% 50%;\\n  border-radius: 10px;\\n}\\n\\n.title-cart[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  color: #484848;\\n  padding-top: 20px;\\n  padding-left: 20px;\\n}\\n\\n.cart-table[_ngcontent-%COMP%] {\\n  margin: 25px;\\n  padding-bottom: 10px;\\n}\\n\\n.cart-brand[_ngcontent-%COMP%] {\\n  \\n  display: flex;\\n  align-items: flex-start;\\n  padding: 0 !important;\\n  align-items: center;\\n  text-align: center;\\n  \\n  border-bottom: 0px !important;\\n}\\n\\n.cart-brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: #484848;\\n  font-size: 14px;\\n  margin-left: 10px;\\n}\\n\\n.cart-table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] {\\n  border-bottom-width: 1px !important;\\n  text-align: end;\\n}\\n\\n.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  border-bottom-width: 0px !important;\\n}\\n\\n.cart-price[_ngcontent-%COMP%] {\\n  color: #a0a0a0;\\n  font-size: 14px;\\n}\\n\\n.row[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%] {\\n  text-align: left !important;\\n}\\n\\n.btn-proceed[_ngcontent-%COMP%] {\\n  background-color: #0d6efd;\\n  color: #ffffff;\\n  font-size: 15px;\\n  width: 340px;\\n  height: 50px;\\n  border-radius: 15px !important;\\n  text-align: center;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-weight: 100;\\n  margin-top: 10px;\\n  margin-bottom: 20px;\\n}\\n\\n.btn-proceed[_ngcontent-%COMP%]:hover {\\n  opacity: 0.8;\\n  text-decoration: none;\\n}\\n\\n.subtotal[_ngcontent-%COMP%] {\\n  color: #f83a29;\\n  font-size: 22px;\\n}\\n\\n.sumtotle[_ngcontent-%COMP%] {\\n  margin-left: 10px;\\n  font-size: 25px;\\n  font-weight: 600;\\n  color: #f83a29;\\n}\\n\\ntbody[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tr[_ngcontent-%COMP%] {\\n  border: 0px solid #f0f0f0 !important;\\n}\\n\\ntbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n}\\n\\n.price[_ngcontent-%COMP%] {\\n  color: #f83a29;\\n  font-size: 24px;\\n  font-weight: 600;\\n}\\n\\n.promo[_ngcontent-%COMP%] {\\n  color: #a0a0a0;\\n}\\n\\n.btn-clear[_ngcontent-%COMP%] {\\n  background-color: #d3d3d3;\\n  color: #ffffff;\\n  font-size: 15px;\\n  width: 100px;\\n  height: 50px;\\n  border-radius: 15px !important;\\n  text-align: center;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-weight: 100;\\n  margin-top: -50px;\\n  float: right;\\n}\\n\\n.btn-delete[_ngcontent-%COMP%] {\\n  background-color: #f6f345;\\n  color: #484848;\\n  font-size: 15px;\\n  width: 70px;\\n  height: 30px;\\n  border-radius: 5px !important;\\n  text-align: center;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-weight: 100;\\n}\\n\\n.name-brand[_ngcontent-%COMP%] {\\n  font-family: \\\"Sriracha\\\", cursive;\\n  color: #484848;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY2FydC9jYXJ0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQUNGOztBQUVBO0VBQ0UsdUJBQUE7RUFDQSxvQ0FBQTtFQUNBLHNCQUFBO0VBQ0EsOEJBQUE7RUFDQSx5QkFBQTtFQUNBLFlBQUE7QUFDRjs7QUFDQTtFQUNFLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx3QkFBQTtFQUNBLG1CQUFBO0FBRUY7O0FBQUE7RUFDRSxlQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFHRjs7QUFEQTtFQUNFLFlBQUE7RUFDQSxvQkFBQTtBQUlGOztBQUZBO0VBQ0Usa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxxQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQTsrQ0FBQTtFQUVBLDZCQUFBO0FBS0Y7O0FBSEE7RUFDRSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBTUY7O0FBSkE7RUFFRSxtQ0FBQTtFQUNBLGVBQUE7QUFNRjs7QUFKQTs7RUFFRSxtQ0FBQTtBQU9GOztBQUxBO0VBQ0UsY0FBQTtFQUNBLGVBQUE7QUFRRjs7QUFOQTtFQUNFLDJCQUFBO0FBU0Y7O0FBUEE7RUFDRSx5QkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSw4QkFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBVUY7O0FBUkE7RUFDRSxZQUFBO0VBQ0EscUJBQUE7QUFXRjs7QUFUQTtFQUNFLGNBQUE7RUFDQSxlQUFBO0FBWUY7O0FBVkE7RUFDRSxpQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7QUFhRjs7QUFYQTs7Ozs7O0VBTUUsb0NBQUE7QUFjRjs7QUFaQTtFQUNJLGFBQUE7RUFDQSx5QkFBQTtFQUNBLG1CQUFBO0FBZUo7O0FBYkE7RUFDRSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FBZ0JGOztBQWRBO0VBQ0UsY0FBQTtBQWlCRjs7QUFkQTtFQUNJLHlCQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLDhCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtBQWlCSjs7QUFmRTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLDZCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBQWtCSjs7QUFoQkU7RUFDRSxnQ0FBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtBQW1CSiIsInNvdXJjZXNDb250ZW50IjpbIi5jb250ZW50LWRldGFpbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gIG1hcmdpbi10b3A6IDQlO1xuICBtYXJnaW4tYm90dG9tOiA1JTtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbn1cblxuLmltZy10aHVtYm5haWwge1xuICBwYWRkaW5nOiAwcHggIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xuICBib3JkZXI6IDBweCAhaW1wb3J0YW50O1xuICBib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIG1heC13aWR0aDogOTAlICFpbXBvcnRhbnQgO1xuICBoZWlnaHQ6IGF1dG87XG59XG4uaW1nLWJyYW5kIHtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIHdpZHRoOiA0NXB4O1xuICBoZWlnaHQ6IDQ1cHg7XG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDUwJTtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cbi50aXRsZS1jYXJ0IHtcbiAgZm9udC1zaXplOiAyOHB4O1xuICBjb2xvcjogIzQ4NDg0ODtcbiAgcGFkZGluZy10b3A6IDIwcHg7XG4gIHBhZGRpbmctbGVmdDogMjBweDtcbn1cbi5jYXJ0LXRhYmxlIHtcbiAgbWFyZ2luOiAyNXB4O1xuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbn1cbi5jYXJ0LWJyYW5kIHtcbiAgLyogaGVpZ2h0OiA2MHB4OyAqL1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIC8qIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDE1cHggIWltcG9ydGFudDtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMTVweCAhaW1wb3J0YW50OyAqL1xuICBib3JkZXItYm90dG9tOiAwcHggIWltcG9ydGFudDtcbn1cbi5jYXJ0LWJyYW5kIHNwYW4ge1xuICBjb2xvcjogIzQ4NDg0ODtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBtYXJnaW4tbGVmdDogMTBweDtcbn1cbi5jYXJ0LXRhYmxlIC5yb3cge1xuICAvLyBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG4gIGJvcmRlci1ib3R0b20td2lkdGg6IDFweCAhaW1wb3J0YW50O1xuICB0ZXh0LWFsaWduOiBlbmQ7XG59XG4uY2FydC10YWJsZSB0ZCxcbnRoIHtcbiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMHB4ICFpbXBvcnRhbnQ7XG59XG4uY2FydC1wcmljZSB7XG4gIGNvbG9yOiAjYTBhMGEwO1xuICBmb250LXNpemU6IDE0cHg7XG59XG4ucm93IC5wcm9kdWN0LXRpdGxlIHtcbiAgdGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50O1xufVxuLmJ0bi1wcm9jZWVkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzBkNmVmZDtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgd2lkdGg6IDM0MHB4O1xuICBoZWlnaHQ6IDUwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHggIWltcG9ydGFudDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXdlaWdodDogMTAwO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuLmJ0bi1wcm9jZWVkOmhvdmVyIHtcbiAgb3BhY2l0eTogMC44O1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG4uc3VidG90YWwge1xuICBjb2xvcjogI2Y4M2EyOTtcbiAgZm9udC1zaXplOiAyMnB4O1xufVxuLnN1bXRvdGxlIHtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIGZvbnQtc2l6ZTogMjVweDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICNmODNhMjk7XG59XG50Ym9keSxcbnRkLFxudGZvb3QsXG50aCxcbnRoZWFkLFxudHIge1xuICBib3JkZXI6IDBweCBzb2xpZCAjZjBmMGYwICFpbXBvcnRhbnQ7XG59XG50Ym9keSB0ZHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5wcmljZSB7XG4gIGNvbG9yOiAjZjgzYTI5O1xuICBmb250LXNpemU6IDI0cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG4ucHJvbW8ge1xuICBjb2xvcjogI2EwYTBhMDtcbn1cblxuLmJ0bi1jbGVhciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2QzZDNkMztcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgd2lkdGg6IDEwMHB4O1xuICAgIGhlaWdodDogNTBweDtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4ICFpbXBvcnRhbnQ7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZm9udC13ZWlnaHQ6IDEwMDtcbiAgICBtYXJnaW4tdG9wOiAtNTBweDtcbiAgICBmbG9hdDogcmlnaHQ7XG4gIH1cbiAgLmJ0bi1kZWxldGV7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjM0NTtcbiAgICBjb2xvcjogIzQ4NDg0ODtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgd2lkdGg6IDcwcHg7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweCAhaW1wb3J0YW50O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtd2VpZ2h0OiAxMDA7XG4gIH1cbiAgLm5hbWUtYnJhbmR7XG4gICAgZm9udC1mYW1pbHk6IFwiU3JpcmFjaGFcIiwgY3Vyc2l2ZTtcbiAgICBjb2xvcjogIzQ4NDg0ODtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["Swal","CartComponent","constructor","http","imgBasePath","ngOnInit","cartProduct","getCart","console","log","total","sumtotle","priceTotal","sumPrice","pricePromo","sumPromotion","test","JSON","parse","window","localStorage","getItem","sum","map","value","amount","detail","price","checkPromotion","clearCart","fire","icon","title","text","showDenyButton","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","setItem","stringify","isDenied","deleteCart","id","newData","filter","totalCart","length","pay","count","getTime","Countdown","setInterval","removeItem","clearInterval","clearTime","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/Users/phanuwitkittirong/Documents/project/movie-market-place/src/app/pages/cart/cart.component.ts","/Users/phanuwitkittirong/Documents/project/movie-market-place/src/app/pages/cart/cart.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core'\nimport { HttpService } from 'src/services/http.service'\nimport Swal from 'sweetalert2'\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss'],\n})\nexport class CartComponent implements OnInit {\n  public basePath = this.http.imgBasePath\n\n  public cartProduct: any = []\n  public total = 0\n  public pricePromo = 0\n  public priceTotal = 0\n  public test = 59\n  public Countdown: any\n  constructor(private http: HttpService) {}\n\n  ngOnInit(): void {\n    this.cartProduct = this.getCart()\n    console.log(this.cartProduct)\n    if (this.cartProduct) {\n      this.total = this.sumtotle()\n      this.priceTotal = this.sumPrice()\n      this.pricePromo = this.sumPromotion()\n      this.test = JSON.parse(window.localStorage.getItem('time') || '')\n    }\n  }\n  getCart() {\n    return JSON.parse(window.localStorage.getItem('cart') || '')\n  }\n  sumtotle() {\n    let sum = 0\n    this.cartProduct.map((value: any) => {\n      return (sum += value.amount)\n    })\n    return sum\n  }\n  sumPrice() {\n    let sum = 0\n    this.cartProduct.map((value: any) => {\n      return (sum += value.amount * value.detail.price)\n    })\n    return sum\n  }\n  sumPromotion() {\n    let sum = 0\n    let checkPromotion = this.sumtotle()\n    console.log(checkPromotion)\n    this.cartProduct.map((value: any) => {\n      return (sum += value.amount * value.detail.price)\n    })\n    if (checkPromotion > 3 && checkPromotion <= 5) {\n      return sum - (sum * 10) / 100\n    } else if (checkPromotion > 5) {\n      return sum - (sum * 20) / 100\n    } else return sum\n  }\n  clearCart() {\n    Swal.fire({\n      icon: 'question',\n      title: '',\n      text: 'ยืนยันการล้างตะกร้า?',\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: `ยืนยัน`,\n      cancelButtonText: `ยกเลิก`,\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire('', 'สำเร็จ!', 'success')\n        window.localStorage.setItem('cart', JSON.stringify([]))\n        this.cartProduct = this.getCart()\n        this.total = 0\n        this.pricePromo = 0\n        this.priceTotal = 0\n      } else if (result.isDenied) {\n        // Swal.fire('Changes are not saved', '', 'info')\n      }\n    })\n  }\n  deleteCart(id: string) {\n    let newData = this.cartProduct.filter((value: any) => {\n      return value.detail.id !== id\n    })\n    // console.log(newData)\n    window.localStorage.setItem('cart', JSON.stringify([...newData]))\n    this.cartProduct = this.getCart()\n    this.http.totalCart = this.getCart().length\n    this.total = this.sumtotle()\n    this.priceTotal = this.sumPrice()\n    this.pricePromo = this.sumPromotion()\n  }\n  pay() {\n    this.test = JSON.parse(window.localStorage.getItem('time') || '')\n    let count = JSON.parse(window.localStorage.getItem('time') || '')\n    if (count) {\n      this.getTime()\n    } else {\n      window.localStorage.setItem('time', JSON.stringify(59))\n      this.count()\n    }\n  }\n  count() {\n    this.Countdown = setInterval(() => {\n      if (this.test === 0) {\n        window.localStorage.removeItem('time')\n        clearInterval(this.Countdown)\n        this.test = 59\n      } else {\n        this.test = JSON.parse(window.localStorage.getItem('time') || '') - 1\n        window.localStorage.setItem('time', JSON.stringify(this.test))\n      }\n    }, 1000)\n  }\n  getTime() {\n    var Countdown = setInterval(() => {\n      this.test = JSON.parse(window.localStorage.getItem('time') || '')\n    }, 1000)\n  }\n  clearTime() {\n    clearInterval(this.Countdown)\n    window.localStorage.removeItem('time')\n  }\n}\n","<div class=\"container\">sss</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}